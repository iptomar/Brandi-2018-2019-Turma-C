<div class="card">
  <div class="card-body">
    <div *ngIf="!isShowing; else datashow">
      <form (submit)="searchFichas($event)">
        <div class="input-group mb-3 ">
          <input type="text" name="searchBox" class="form-control" placeholder="Pesquisar por" value="{{_searchWord}}"
            aria-label="Pesquisar por">
          <div class="input-group-append">
            <button class="btn btn-outline-primary" type="submit">Pesquisar</button>
          </div>
        </div>
      </form>
      <div class="row">
        <div class="col-md-3 mb-4" *ngFor="let u of _datasheetlist; let i = index">
          <div class="card datasheetClick" (click)="openFicha(i)">
            <img src="../../assets/images/background_texture.jpg" class="card-img-top">
            <div class="card-body">
              <p class="card-title">{{u.object_designation}}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <ng-template #datashow>
      <button type="button" (click)="openFicha(-1)"
        class="btn btn-outline-primary mb-3 col-md-2">Voltar</button>
      <form (submit)="saveDatasheet($event)">
      <div *ngIf='messageEditErr !== ""' class="alert alert-warning alert-dismissible fade show" role="alert">
        <strong>{{messageEditErr}}</strong>
        <button type="button" class="close" aria-label="Close" (click)='messageEditErr=""'>
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <!--mensage de alerta acaba aqui-->

      <div *ngIf='messageEditSuccess !== ""' class="alert alert-success alert-dismissible fade show" role="alert">
        <strong>{{messageEditSuccess}}</strong>
        <button type="button" class="close" aria-label="Close" (click)='messageEditSuccess=""'>
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <!--Mensagem de Sucesso acaba aqui-->
      <div id="editDatasheetCarousel" class="carousel slide mb-2" data-ride="carousel">
          <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="../../assets/images/background_texture.jpg" class="d-block w-100">
            </div>
            <div class="carousel-item">
                <img src="../../assets/images/background_texture.jpg" class="d-block w-100">
            </div>
          </div>
          <a class="carousel-control-prev" href="#editDatasheetCarousel" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#editDatasheetCarousel" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
      </div>
      
      <!--Inicio de campos-->
      <div class="form-group">
        <label for="CEARC">Numero de Processo CEARC</label>
        <input name="CEARC" type="text" class="form-control" placeholder="Numero de Processo CEARC"
          value="{{_datasheetlist[_onEdit].CEARC_process}}" [readonly]="!isEditing" />
      </div>
      <div class="form-group">
        <label for="CEARCdate">Data do processo CEARC</label>
        <input name="CEARCdate" type="date" class="form-control" placeholder="Data de processo Cearc"
          value="{{_datasheetlist[_onEdit].CEARC_process_date|date: 'yyyy-MM-dd'}}" [readonly]="!isEditing" />
      </div>
      <div class="form-group">
        <label for="CEARCentrydate">Data de entrada do processo CEARC</label>
        <input name="CEARCentrydate" type="date" class="form-control" placeholder="Data de Entrada do processo CEARC"
          value="{{_datasheetlist[_onEdit].CEARC_entry_date|date:'yyyy-MM-dd'}}" [readonly]="!isEditing" />
      </div>
      <div class="form-group">
        <label for="LCRM">Numero de Processo LCRM</label>
        <input name="LCRM" type="text" class="form-control" placeholder="Numero de Processo LCRM"
          value="{{_datasheetlist[_onEdit].LCRM_process}}" [readonly]="!isEditing" />
      </div>
      <div class="form-group">
        <label for="LCRMdate">data de processo LCRM</label>
        <input name="LCRMdate" type="date" class="form-control" placeholder="Numero de Processo LCRM"
          value="{{_datasheetlist[_onEdit].LCRM_process_date|date:'yyyy-MM-dd'}}" [readonly]="!isEditing" />
      </div>
      <div class="form-group">
        <label for="LCRMentrydate">data de entrada do processo LCRM</label>
        <input name="LCRMentrydate" type="date" class="form-control" placeholder="Numero de Processo LCRM"
          value="{{_datasheetlist[_onEdit].LCRM_entry_date|date:'yyyy-MM-dd'}}" [readonly]="!isEditing" />
      </div>
      <div class="form-group">
        <label for="coordinator">Coordenador</label>
        <input name="coordinator" type="number" class="form-control" placeholder="Numero de Processo LCRM"
          value="{{_datasheetlist[_onEdit].coordinator}}" [readonly]="!isEditing" />
      </div>

      <div class="form-group" *ngIf="!isEditing; else editbuttons">
        <div class="row">
          <button type="button" (click)="setShowMode(false)"
            class="btn btn-outline-success col-md-8 mr-md-2 ml-3 mr-3 mb-2 mb-md-0">Editar</button>
          <button type="button" (click)="deleteDatasheet()"
            class="btn btn-outline-danger col-md mr-3 ml-md-2 ml-3">Eliminar</button>
        </div>
      </div>
      <ng-template #editbuttons>
        <div class="form-group">
          <div class="row">
            <button type="submit"
              class="btn btn-outline-success col-md-8 mr-md-2 ml-3 mr-3 mb-2 mb-md-0">Guardar</button>
            <button type="button" (click)="setShowMode(true)"
              class="btn btn-outline-primary col-md mr-3 ml-md-2 ml-3">Cancelar</button>
          </div>
        </div>
      </ng-template>
      <!--Fim de campos-->
      </form>
    </ng-template>
  </div>
</div>